(this["webpackJsonpMapbox-ReactJS-API"]=this["webpackJsonpMapbox-ReactJS-API"]||[]).push([[0],{20:function(e,t,n){e.exports=n(32)},25:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var a,o,r=n(0),c=n.n(r),i=n(10),s=n.n(i),u=(n(25),n(3)),m=n.n(u),l=n(9),p=n(14),f=n(15),h=n(19),d=n(16),v=n(18),g=n(34),b=n(35),y=n(36),L=n(37),w=n(11),j=(n(28),n(29),"&access_token=pk.eyJ1IjoiYWtzaGF5Mjc5NiIsImEiOiJjazFjbGY2emwwNGZpM25scDcwMjNzMXhlIn0.-D54L9tbYqRfBSaXWgJbrA"),x={width:"100vw",height:"60vh",latitude:18.52043,longitude:73.856743,zoom:12},E={padding:"10px",color:"#fff",cursor:"pointer",background:"#1978c8",borderRadius:"6px"},k=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(c)))).setFrom=function(e){var t=e.target.value;n.from=t},n.setTo=function(e){var t=e.target.value;n.to=t},n.setFromLocation=Object(l.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.from,a="https://api.mapbox.com/geocoding/v5/mapbox.places/"+t.replace(" ","%20")+".json?"+j,e.abrupt("return",fetch(a).then((function(e){return e.json()})).then((function(e){var t=e.features[0].geometry.coordinates[0],a=e.features[0].geometry.coordinates[1];n.fromLat=t,n.fromLng=a,n.fromLatLng=t+","+a})));case 3:case"end":return e.stop()}}),e)}))),n.setToLocation=Object(l.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.to,a="https://api.mapbox.com/geocoding/v5/mapbox.places/"+t.replace(" ","%20")+".json?"+j,e.abrupt("return",fetch(a).then((function(e){return e.json()})).then((function(e){var t=e.features[0].geometry.coordinates[0],a=e.features[0].geometry.coordinates[1];n.toLat=t,n.toLng=a,n.toLatLng=t+","+a})));case 3:case"end":return e.stop()}}),e)}))),n.fetchNavData=function(){var e=Object(l.a)(m.a.mark((function e(t){var n,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://api.mapbox.com/directions/v5/mapbox/driving/"+t+".json?geometries=geojson"+j,e.next=3,fetch(n).then((function(e){return e.json()})).then((function(e){o=e.routes[0].geometry.coordinates;var t=[];o.map((function(e,n){t.push("["+e+"]")}));var n='{"type": "Feature","geometry": {"type": "LineString","coordinates": ['+t+"]}}";a=JSON.parse(n)})).catch((function(e){console.error(e),alert("Unable to find Location!")}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.submit=Object(l.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setFromLocation();case 2:return e.next=4,n.setToLocation();case 4:return t=n.fromLatLng+";"+n.toLatLng,e.next=7,n.fetchNavData(t);case 7:n.mapRemoveLayer(),n.mapAddLayer();case 9:case"end":return e.stop()}}),e)}))),n.mapRemoveLayer=function(){try{o.getSource("route")&&(o.removeLayer("route"),o.removeSource("route"))}catch(e){console.log(e)}},n.mapAddLayer=function(){o.getSource("route")&&(o.removeLayer("route"),o.removeSource("route")),o.addSource("route",{type:"geojson",data:a}),o.addLayer({id:"route",source:"route",type:"line",paint:{"line-color":"#336666","line-width":6}});var e=[[n.fromLat,n.fromLng],[n.toLat,n.toLng]];o.fitBounds(e,{padding:{top:100,bottom:100,left:100,right:100}})},n.postLocationData=function(){var e=Object(l.a)(m.a.mark((function e(t,n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={from_location:t,to_location:n},fetch("http://127.0.0.1:8000/api/map-data/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return console.log(e)})).catch((function(e){return console.error(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"d-flex flex-column align-items-center"},c.a.createElement("div",{className:"text-center mt-4 mb-4"},c.a.createElement(g.a,null,c.a.createElement(b.a,null,c.a.createElement(y.a,{type:"text",name:"from_location",id:"fromInput",placeholder:"Enter Starting Point",onChange:this.setFrom})),c.a.createElement(b.a,null,c.a.createElement(y.a,{type:"text",name:"to_location",id:"toInput",placeholder:"Enter Destination Point",onChange:this.setTo})),c.a.createElement("div",null,c.a.createElement(L.a,{color:"primary",className:"mr-3",onClick:this.submit},"Submit"),c.a.createElement(L.a,{color:"primary",onClick:this.mapRemoveLayer},"Clear")))),c.a.createElement(w.c,Object.assign({},x,{style:{width:"98vw",height:"82vh"},mapStyle:"mapbox://styles/mapbox/streets-v11",accessToken:"pk.eyJ1IjoiYWtzaGF5Mjc5NiIsImEiOiJjazFjbGphcGcwbTQyM2Rtd2oxZW9tYWRuIn0.0UVb63pN3wW_LIsQWpECIw",onViewportChange:function(t){e.viewport=t},children:this.props.children}),c.a.createElement(w.a.Consumer,null,(function(e){o=e})),this.navFullData&&c.a.createElement(r.Fragment,null,c.a.createElement(w.b,{coordinates:[this.fromLat,this.fromLng],draggable:!0},c.a.createElement("div",{style:E},"Hi There!")))))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(c.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[20,1,2]]]);
//# sourceMappingURL=main.ee28dda0.chunk.js.map